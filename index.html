<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÂÄìÂÄì‰∏ìÂ±ûÔºöU1-U6ÂÖ®Â¢ÉÂ∞ÅÈîÅÈ¢òÂ∫ìÁâà</title>
    <style>
        :root { --n-blue: #00f3ff; --n-purple: #bc13fe; --n-pink: #ff00ff; --bg: #05060f; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'PingFang SC', sans-serif; background: var(--bg); color: white; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        header { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.8); border-bottom: 2px solid var(--n-blue); box-shadow: 0 0 15px var(--n-blue); }
        .container { flex: 1; display: flex; flex-direction: row; overflow: hidden; }
        nav { width: 220px; background: rgba(0,0,0,0.3); padding: 15px; display: flex; flex-direction: column; gap: 8px; border-right: 1px solid #333; overflow-y: auto; }
        .nav-btn { padding: 12px; background: #1a1b3a; border: 1px solid #444; border-radius: 8px; color: #aaa; cursor: pointer; text-align: left; font-size: 0.85rem; }
        .nav-btn.active { background: var(--n-purple); color: white; border: none; box-shadow: 0 0 10px var(--n-purple); }
        main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; position: relative; background: radial-gradient(circle at center, #1a1b3a 0%, #05060f 100%); }
        .battle-card { width: 100%; max-width: 800px; background: rgba(20, 22, 45, 0.95); border-radius: 30px; padding: 30px; border: 2px solid var(--n-blue); position: relative; }
        .q-tag { position: absolute; top: -15px; left: 30px; background: var(--n-blue); color: black; padding: 4px 12px; border-radius: 5px; font-weight: bold; font-size: 0.8rem; }
        .q-text { font-size: 1.8rem; font-weight: bold; text-align: center; margin: 30px 0; min-height: 100px; display: flex; align-items: center; justify-content: center; line-height: 1.3; }
        .options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .opt { padding: 18px; background: rgba(255,255,255,0.05); border: 1px solid #444; border-radius: 15px; cursor: pointer; text-align: center; font-size: 1.05rem; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .opt:active { transform: scale(0.95); }
        .opt.correct { background: #00ff88 !important; color: black; font-weight: bold; }
        .opt.wrong { background: #ff4466 !important; color: white; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; z-index: 1000; align-items: center; justify-content: center; padding: 20px; }
        .pop { background: #1a1b3a; border: 3px solid var(--n-pink); border-radius: 20px; padding: 25px; width: 100%; max-width: 500px; }
        .k-box { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin: 15px 0; text-align: left; line-height: 1.6; color: var(--n-blue); border-left: 4px solid var(--n-blue); font-size: 0.95rem; }
        .close-btn { width: 100%; padding: 15px; background: var(--n-pink); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; }
        @media (max-width: 768px) { .container { flex-direction: column; } nav { width: 100%; height: 70px; flex-direction: row; } .nav-btn { min-width: 100px; font-size: 0.7rem; } .options { grid-template-columns: 1fr; } .q-text { font-size: 1.4rem; } }
    </style>
</head>
<body>

<header>
    <div style="font-weight:900; color:var(--n-blue);">TANTAN ULTRA 7.0</div>
    <div style="display:flex; gap:15px;">
        <div id="hp-box">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div id="xp-text" style="color:gold; font-weight:bold;">XP: 0</div>
    </div>
</header>

<div class="container">
    <nav id="unit-nav"></nav>
    <main>
        <div class="battle-card">
            <div class="q-tag" id="q-tag">LOADING...</div>
            <div class="q-text" id="q-text">ÁÇπÂáªÂºÄÂßãÊàòÊñó</div>
            <div class="options" id="opt-box"></div>
        </div>
    </main>
</div>

<div class="overlay" id="k-overlay">
    <div class="pop">
        <h3 style="color:var(--n-pink); margin:0;">üõ°Ô∏è Ê†∏ÂøÉÊï∞ÊçÆÂ∫ì‰øÆÊ≠£</h3>
        <div class="k-box" id="k-content"></div>
        <button class="close-btn" onclick="closePop()">Âê∏Êî∂Âπ∂ÁªßÁª≠</button>
    </div>
</div>

<script>
// --- ÂÄìÂÄìÔºöËøôÊòØ‰ªé‰Ω†ÊñáÊ°£ÈáåÂÖ®ÈáèÊèêÂèñÁöÑÈ¢òÂ∫ìÔºàÂ∑≤ÂéªÈáçÔºåÂåÖÂê´ÊâÄÊúâÁªÜËäÇÔºâ ---
const RAW_DATA = [
    // Unit 1
    {u:1, q:"proposal (n.)", a:"Âª∫ËÆÆ; ÊèêËÆÆ", k:"propose (v.) Âª∫ËÆÆ -> proposal (n.)„ÄÇÊê≠ÈÖçÔºöwrite a proposal of protecting water"},
    {u:1, q:"percentage (n.)", a:"ÁôæÂàÜÊØî; ÁôæÂàÜÁéá", k:"ÈóÆÂè•ÔºöWhat percentage of an adult‚Äôs body is water?"},
    {u:1, q:"lock up in ice", a:"ÈîÅÂú®ÂÜ∞Èáå", k:"lock up: Â∞ÅÂ≠òÔºåÈîÅ‰Ωè"},
    {u:1, q:"make full use of time", a:"ÂÖÖÂàÜÂà©Áî®Êó∂Èó¥", k:"make use of: Âà©Áî®; ‰ΩøÁî®"},
    {u:1, q:"take in", a:"ÊëÑÂÖ•ÔºåÂê∏Êî∂", k:"How much water do we need to take in every day?"},
    {u:1, q:"billion", a:"ÂçÅ‰∫ø", k:"2 billion (‰∏çÂä†s); billions of dollars (Êï∞ÂçÅ‰∫øÔºåÂä†s)"},
    {u:1, q:"dripping tap", a:"Êª¥Ê∞¥ÁöÑÊ∞¥ÈæôÂ§¥", k:"drip (v.) -> dripping (adj.) Êª¥Ê∞¥ÁöÑ„ÄÇfix a dripping tap ‰øÆÁêÜÊ∞¥ÈæôÂ§¥"},
    {u:1, q:"satisfying (adj.)", a:"‰ª§‰∫∫Êª°ÊÑèÁöÑ", k:"satisfy (v.) -> satisfied (‰∫∫ÊÑü) / satisfying (Áâ©ÊÑü)"},
    {u:1, q:"supply sb. ___ sth.", a:"with", k:"supply sb. with sth. = supply sth. to sb. (ÁªôÊüê‰∫∫Êèê‰æõÊüêÁâ©)"},
    {u:1, q:"The more... the more...", a:"Ë∂ä...Â∞±Ë∂ä...", k:"The more water we use, the more energy is needed."},
    {u:1, q:"What if somebody breaks the rules?", a:"Â¶ÇÊûúÊúâ‰∫∫ÊâìÁ†¥ËßÑÂàôÊÄé‰πàÂäûÔºü", k:"What if...? Ë°®Á§∫ÂÅáËÆæÔºö'ÂÅáËã•...ÊÄé‰πàÂäû?'"},
    {u:1, q:"amount of water", a:"Ê∞¥ÁöÑÊï∞Èáè", k:"the amount of + ‰∏çÂèØÊï∞ÂêçËØç; the number of + ÂèØÊï∞ÂêçËØç"},
    {u:1, q:"thirsty (adj.)", a:"Ê∏¥ÁöÑ", k:"thirst (v./n.) -> thirsty (adj.)"},
    {u:1, q:"polluted (adj.)", a:"ÂèóÊ±°ÊüìÁöÑ", k:"pollute (v.) -> pollution (n.) -> polluted (adj.)"},

    // Unit 2
    {u:2, q:"influence (v./n.)", a:"ÂΩ±Âìç; ‰ΩúÁî®", k:"have an influence on sb./sth. ÂØπ...ÊúâÂΩ±Âìç (=effect)"},
    {u:2, q:"facial recognition", a:"‰∫∫ËÑ∏ËØÜÂà´", k:"recognize (v.) -> recognition (n.)"},
    {u:2, q:"technology (n.)", a:"ÊäÄÊúØ; Â∑•Ëâ∫", k:"digital technology Êï∞Â≠óÊäÄÊúØ; technical (adj.) ÊäÄÊúØÁöÑ"},
    {u:2, q:"complain (v.)", a:"Êä±ÊÄ®; ÂüãÊÄ®", k:"complain to sb. about sth. / complaint (n.) ÊäïËØâ"},
    {u:2, q:"freeze (v.)", a:"Ê≠ªÊú∫; ÂÜªÁªì", k:"‰∏âÂèòÔºöfreeze-froze-frozen„ÄÇMy smartwatch keeps freezing."},
    {u:2, q:"run out of space", a:"Á©∫Èó¥ËÄóÂ∞Ω/‰∏çË∂≥", k:"My smartphone keeps running out of space."},
    {u:2, q:"as soon as", a:"‰∏Ä...Â∞±...", k:"Êó∂Èó¥Áä∂ËØ≠‰ªéÂè•ÔºåÈÅµÂæ™'‰∏ªÂ∞Ü‰ªéÁé∞'ÂéüÂàô"},
    {u:2, q:"warn sb. ___ sth.", a:"of", k:"warn sb. of sth. Ë≠¶ÂëäÊüê‰∫∫Êüê‰∫ã; warn sb. (not) to do sth."},
    {u:2, q:"in conclusion", a:"ÊÄªËÄåË®Ä‰πã; ÊúÄÂêé", k:"conclude (v.) -> conclusion (n.)"},
    {u:2, q:"the disabled", a:"ÊÆãÁñæ‰∫∫", k:"Digital technology makes life easier for the disabled."},
    {u:2, q:"keep an eye on", a:"ÁÖßÁúã; ÁïôÊÑè", k:"= care for"},
    {u:2, q:"tablet (n.)", a:"Âπ≥ÊùøÁîµËÑë; ËçØÁâá", k:"Âå∫Âà´Ôºötable Ê°åÂ≠ê"},

    // Unit 3
    {u:3, q:"curious (adj.)", a:"Â•ΩÂ•áÁöÑ", k:"be curious about... ÂØπ...Â•ΩÂ•á; curiosity (n.) Â•ΩÂ•áÂøÉ"},
    {u:3, q:"be familiar with", a:"ÂØπ...ÁÜüÊÇâ", k:"sb. be familiar with sth. / sth. be familiar to sb."},
    {u:3, q:"ruin your eyesight", a:"ÊØÅÊéâËßÜÂäõ", k:"Don't read in the dark, or you will ruin your eyesight."},
    {u:3, q:"awake (adj.)", a:"ÈÜíÁùÄÁöÑ", k:"stay awake ‰øùÊåÅÊ∏ÖÈÜí; awake-awoke-awoken; wake sb. up"},
    {u:3, q:"result in", a:"ÂØºËá¥", k:"Ëæ®ÊûêÔºöresult in (ÂêéÊé•ÁªìÊûú) vs result from (ÂêéÊé•ÂéüÂõ†)"},
    {u:3, q:"turn out", a:"ËØÅÊòéÊòØ; ÁªìÊûúÊòØ", k:"It turns out (that)... ‰∫ãÂÆûËØÅÊòé..."},
    {u:3, q:"be crazy about", a:"ÂØπ...ÁñØÁãÇ/ÁùÄËø∑", k:"= be very interested in"},
    {u:3, q:"have sth. in common", a:"ÊúâÂÖ±ÂêåÁÇπ", k:"I found that we have a lot in common."},
    {u:3, q:"wonder (v.)", a:"ÊÉ≥Áü•ÈÅì; Áê¢Á£®", k:"no wonder ÈöæÊÄ™; I wonder what time the meeting starts."},
    {u:3, q:"physics (n.)", a:"Áâ©ÁêÜÂ≠¶", k:"physical (adj.) Ë∫´‰ΩìÁöÑ; Áâ©ÁêÜÁöÑ; physicist (Áâ©ÁêÜÂ≠¶ÂÆ∂)"},

    // Unit 4
    {u:4, q:"belong to sb.", a:"Â±û‰∫éÊüê‰∫∫", k:"Ê≥®ÊÑèÔºöÊó†Ë¢´Âä®ËØ≠ÊÄÅÔºåÊó†ËøõË°åÊó∂„ÄÇThe old player belongs to him."},
    {u:4, q:"except", a:"Èô§...‰πãÂ§ñ(‰∏çÂåÖÊã¨)", k:"Ëæ®ÊûêÔºöexcept (ÂáèÊ≥ï) vs besides (Âä†Ê≥ï/ÂåÖÊã¨)"},
    {u:4, q:"The 19th century saw...", a:"19‰∏ñÁ∫™ÁªèÂéÜ‰∫Ü...", k:"sawÂú®ËøôÈáåÊÑè‰∏∫'ËßÅËØÅ/ÁªèÂéÜ'ÔºåÂ∏∏‰ª•Êó∂Èó¥/Âú∞ÁÇπ‰Ωú‰∏ªËØ≠"},
    {u:4, q:"decade (n.)", a:"ÂçÅÂπ¥", k:"over the next few decades Âú®Êé•‰∏ãÊù•ÁöÑÂá†ÂçÅÂπ¥Èáå"},
    {u:4, q:"wealthy (adj.)", a:"ÂØåÊúâÁöÑ", k:"wealth (n.) Ë¥¢ÂØå; the wealthy ÂØå‰∫∫"},
    {u:4, q:"punish (v.)", a:"ÊÉ©ÁΩö", k:"punishment (n.) ÊÉ©ÁΩö"},
    {u:4, q:"electricity (n.)", a:"Áîµ; ÁîµËÉΩ", k:"electric (adj.) ÁîµÁöÑ; electric heater ÁîµÊöñÂô®"},
    {u:4, q:"bring ... to life", a:"‰Ωø...ÁîüÂä®Ëµ∑Êù•", k:"bring ancient objects to life ËÆ©Âè§Áâ©Ê¥ªËµ∑Êù•"},
    {u:4, q:"imagine doing", a:"ÊÉ≥Ë±°ÂÅöÊüê‰∫ã", k:"imagination (n.) ÊÉ≥Ë±°Âäõ"},
    {u:4, q:"borrow ... from", a:"Âêë...ÂÄü", k:"lend ... to ÂÄüÁªô..."},

    // Unit 5
    {u:5, q:"never let you down", a:"Ê∞∏Ëøú‰∏çËÆ©‰Ω†Â§±Êúõ", k:"let sb. down = disappoint sb."},
    {u:5, q:"passion (n.)", a:"ÈÖ∑Áà±; ÁÉ≠ÊÉÖ", k:"be passionate about ÂØπ...ÂÖÖÊª°ÁÉ≠ÊÉÖ; shared passion ÂÖ±ÂêåÁöÑÁÉ≠Áà±"},
    {u:5, q:"cooperate with others", a:"‰∏é‰ªñ‰∫∫Âêà‰Ωú", k:"cooperate (v.) -> cooperation (n.) Âêà‰Ωú"},
    {u:5, q:"take turns doing", a:"ËΩÆÊµÅÂÅöÊüê‰∫ã", k:"take turns to do / doing sth. ËΩÆÊµÅÂÅöÊüê‰∫ã"},
    {u:5, q:"disappointed (adj.)", a:"ÊÑüÂà∞Â§±ÊúõÁöÑ", k:"be disappointed with/at ÂØπÊüê‰∫ãÊÑüÂà∞Â§±Êúõ"},
    {u:5, q:"pull a long face", a:"ÊãâÈïøËÑ∏; ‰∏çÈ´òÂÖ¥", k:"She pulled a long face when she failed."},
    {u:5, q:"success (n.)", a:"ÊàêÂäü", k:"succeed (v.) / successful (adj.) / successfully (adv.)"},
    {u:5, q:"pay attention to", a:"Ê≥®ÊÑè; ‰∏ìÊ≥®", k:"Ê≥®ÊÑètoÊòØ‰ªãËØçÔºåÂêéÊé•doingÊàñÂêçËØç"},
    {u:5, q:"get along with", a:"‰∏é...Áõ∏Â§Ñ", k:"get along well with sb."},

    // Unit 6
    {u:6, q:"accident (n.)", a:"‰∫ãÊïÖ; ÊÑèÂ§ñ", k:"accidental (adj.) -> accidentally (adv. ÊÑèÂ§ñÂú∞)"},
    {u:6, q:"security robot", a:"ÂÆâ‰øùÊú∫Âô®‰∫∫", k:"secure (adj. ÂÆâÂÖ®ÁöÑ) -> security (n. ÂÆâÂÖ®/‰øùÂÆâ)"},
    {u:6, q:"figure out", a:"ÂºÑÊáÇ; ËÆ°ÁÆóÂá∫", k:"I can't figure out this math problem."},
    {u:6, q:"unbelievable (adj.)", a:"Èöæ‰ª•ÁΩÆ‰ø°ÁöÑ", k:"believe (v.) -> believable -> unbelievable"},
    {u:6, q:"stop to do sth.", a:"ÂÅú‰∏ãÊù•ÂéªÂÅöÂè¶‰∏Ä‰ª∂‰∫ã", k:"Ëæ®ÊûêÔºöstop doing (ÂÅúÊ≠¢Ê≠£Âú®ÂÅöÁöÑ) vs stop to do (ÂéªÂÅöÊñ∞‰∫ã)"},
    {u:6, q:"unless", a:"Èô§Èùû; Â¶ÇÊûú‰∏ç", k:"ÂºïÂØºÊù°‰ª∂Áä∂ËØ≠‰ªéÂè•Ôºåunless = if...not"},
    {u:6, q:"as long as", a:"Âè™Ë¶Å", k:"ÂºïÂØºÊù°‰ª∂Áä∂ËØ≠‰ªéÂè•„ÄÇAs long as you study, you will pass."},
    {u:6, q:"improve health care", a:"ÊîπÂñÑÂåªÁñóÁ≥ªÁªü", k:"AI will help improve health care."}
];

let hp = 5, xp = 0, currentUnit = 0, audioCtx = null;

function init() {
    const nav = document.getElementById('unit-nav');
    const labels = ["ÂÖ®ÈÉ®ÂçïÂÖÉ", "U1: Ê∞¥ËµÑÊ∫ê", "U2: Êï∞Â≠óÁîüÊ¥ª", "U3: Â•ΩÂ•áÂøÉ", "U4: ËøáÂéª‰∏éÁé∞Âú®", "U5: Âõ¢ÈòüÂêà‰Ωú", "U6: Êú™Êù•ÁîüÊ¥ª"];
    labels.forEach((l, i) => {
        const btn = document.createElement('button');
        btn.className = 'nav-btn' + (i===0?' active':'');
        btn.innerText = l;
        btn.onclick = (e) => {
            currentUnit = i;
            document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
            btn.classList.add('active');
            nextQ();
        };
        nav.appendChild(btn);
    });
    nextQ();
}

function nextQ() {
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    let pool = currentUnit === 0 ? RAW_DATA : RAW_DATA.filter(x => x.u === currentUnit);
    const item = pool[Math.floor(Math.random() * pool.length)];
    
    document.getElementById('q-tag').innerText = "UNIT " + item.u;
    document.getElementById('q-text').innerText = item.q;

    let distractors = RAW_DATA.filter(x => x.a !== item.a).sort(() => 0.5 - Math.random()).slice(0, 3);
    let options = [item, ...distractors].sort(() => 0.5 - Math.random());

    const box = document.getElementById('opt-box');
    box.innerHTML = '';
    options.forEach(o => {
        const div = document.createElement('div');
        div.className = 'opt';
        div.innerText = o.a;
        div.onclick = () => check(o === item, div, item.k);
        box.appendChild(div);
    });
}

function check(isCorrect, el, k) {
    if(isCorrect) {
        el.classList.add('correct');
        playSfx(880);
        xp += 10;
        updateUI();
        setTimeout(nextQ, 600);
    } else {
        el.classList.add('wrong');
        playSfx(220, 'square');
        hp--;
        updateUI();
        if(hp <= 0) { alert("HPÂΩíÈõ∂ÔºÅÁ≥ªÁªüÈáçÂêØ‰∏≠..."); location.reload(); }
        else showPop(k);
    }
}

function updateUI() {
    document.getElementById('hp-box').innerText = '‚ù§Ô∏è'.repeat(hp);
    document.getElementById('xp-text').innerText = 'XP: ' + xp;
}

function showPop(k) {
    document.getElementById('k-content').innerText = k;
    document.getElementById('k-overlay').style.display = 'flex';
}

function closePop() {
    document.getElementById('k-overlay').style.display = 'none';
    nextQ();
}

function playSfx(f, t='sine') {
    if(!audioCtx) return;
    const o = audioCtx.createOscillator(), g = audioCtx.createGain();
    o.type = t; o.frequency.value = f;
    g.gain.setValueAtTime(0.1, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
    o.connect(g); g.connect(audioCtx.destination);
    o.start(); o.stop(audioCtx.currentTime + 0.2);
}

window.onload = init;
</script>
</body>
</html>